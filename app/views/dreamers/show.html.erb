<div data-form="profile">
  <%= render partial: "edit", locals: {dreamer: @dreamer} %>
</div>

<p>
  <h1 class="center">
    <% if @dreamer == current_dreamer %>
      <%= link_to image_tag("edit-icon.png", class: "edit-icon"), edit_dreamer_path(current_dreamer), remote: true %>
    <% end %>
    <%= @dreamer.username %>'s Profile
  </h1>
</p>

<div data-div="profile">
  <%= render partial: "stats", locals: {dreamer: @dreamer} %>
</div>
<hr>

<% if @dreamer == current_dreamer %>
  <h3 class="subtitle">Set Up Dream Checks</h3>

  <%= form_tag('/send_sms', method: 'POST') do %>
    <input type="text" placeholder="enter number" name="number">
    <input type="text" placeholder="enter message here" name="message">
    <button type="submit">Submit</button>
  <% end %>
<%end%>

<hr>
<h3 class="subtitle">Recent Dreams</h3>
<% if @dreamer.dreams.empty? %>
  <p>This dreamer has not registered any dreams yet.</p>
<% else %>
  <% @dreamer.top_dreams.each do |dream| %>
    <%= dream.created_at.strftime("%B %d %Y") %>:
    <%= link_to dream.title, dream_path(dream) %>
    Lucid Rating: <%= calculate_lucidity(dream) %>
    <br>
  <% end %>
<% end %>